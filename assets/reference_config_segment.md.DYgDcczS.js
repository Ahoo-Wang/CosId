import{_ as s,c as i,a2 as e,o as d}from"./chunks/framework.Dg3afQf7.js";const c=JSON.parse('{"title":"SegmentId 配置","description":"","frontmatter":{},"headers":[],"relativePath":"reference/config/segment.md","filePath":"reference/config/segment.md","lastUpdated":1760420434000}'),a={name:"reference/config/segment.md"};function n(h,t,r,o,l,p){return d(),i("div",null,t[0]||(t[0]=[e(`<h1 id="segmentid-配置" tabindex="-1">SegmentId 配置 <a class="header-anchor" href="#segmentid-配置" aria-label="Permalink to &quot;SegmentId 配置&quot;">​</a></h1><blockquote><p><code>me.ahoo.cosid.spring.boot.starter.segment.SegmentIdProperties</code></p></blockquote><table tabindex="0"><thead><tr><th>名称</th><th>数据类型</th><th>说明</th><th>默认值</th></tr></thead><tbody><tr><td>enabled</td><td><code>boolean</code></td><td>是否启用</td><td><code>false</code></td></tr><tr><td>mode</td><td><code>Mode</code></td><td>号段生成器模式：<code>DEFAULT</code>/ <code>CHAIN</code></td><td><code>CHAIN</code></td></tr><tr><td>ttl</td><td><code>long</code></td><td>号段的生存期（秒）</td><td><code>TIME_TO_LIVE_FOREVER</code></td></tr><tr><td>distributor</td><td><code>Distributor</code></td><td>号段分发器</td><td></td></tr><tr><td>chain</td><td><code>Chain</code></td><td>号段链模式配置</td><td></td></tr><tr><td>share</td><td><code>IdDefinition</code></td><td>共享ID生成器配置</td><td></td></tr><tr><td>provider</td><td><code>Map&lt;String, IdDefinition&gt;</code></td><td>多ID生成器配置</td><td></td></tr></tbody></table><h2 id="distributor" tabindex="-1">Distributor <a class="header-anchor" href="#distributor" aria-label="Permalink to &quot;Distributor&quot;">​</a></h2><blockquote><p><code>me.ahoo.cosid.spring.boot.starter.segment.SegmentIdProperties.Distributor</code></p></blockquote><table tabindex="0"><thead><tr><th>名称</th><th>数据类型</th><th>说明</th><th>默认值</th></tr></thead><tbody><tr><td>type</td><td><code>Distributor.Type</code></td><td>号段分发器类型： <code>REDIS</code>/<code>JDBC</code>/<code>ZOOKEEPER</code></td><td><code>Type.REDIS</code></td></tr><tr><td>jdbc</td><td><code>Distributor.Jdbc</code></td><td>Jdbc号段生成器配置</td><td></td></tr></tbody></table><h3 id="distributor-jdbc" tabindex="-1">Distributor.Jdbc <a class="header-anchor" href="#distributor-jdbc" aria-label="Permalink to &quot;Distributor.Jdbc&quot;">​</a></h3><table tabindex="0"><thead><tr><th>名称</th><th>数据类型</th><th>说明</th><th>默认值</th></tr></thead><tbody><tr><td>enable-auto-init-cosid-table</td><td><code>boolean</code></td><td>自动创建号段<code>cosid</code>表</td><td><code>false</code></td></tr><tr><td>enable-auto-init-id-segment</td><td><code>boolean</code></td><td>自动创建号段行</td><td><code>true</code></td></tr></tbody></table><h2 id="chain" tabindex="-1">Chain <a class="header-anchor" href="#chain" aria-label="Permalink to &quot;Chain&quot;">​</a></h2><blockquote><p><code>me.ahoo.cosid.spring.boot.starter.segment.SegmentIdProperties.Chain</code></p></blockquote><table tabindex="0"><thead><tr><th>名称</th><th>数据类型</th><th>说明</th><th>默认值</th></tr></thead><tbody><tr><td>safe-distance</td><td><code>int</code></td><td>安全距离</td><td><code>10</code></td></tr><tr><td>prefetch-worker</td><td><code>Chain.PrefetchWorker</code></td><td>号段预取工作者线程池</td><td><code>true</code></td></tr></tbody></table><h3 id="chain-prefetchworker" tabindex="-1">Chain.PrefetchWorker <a class="header-anchor" href="#chain-prefetchworker" aria-label="Permalink to &quot;Chain.PrefetchWorker&quot;">​</a></h3><table tabindex="0"><thead><tr><th>名称</th><th>数据类型</th><th>说明</th><th>默认值</th></tr></thead><tbody><tr><td>prefetch-period</td><td><code>Duration</code></td><td>预取周期</td><td><code>Duration.ofSeconds(1)</code></td></tr><tr><td>core-pool-size</td><td><code>int</code></td><td>线程池大小</td><td><code>Runtime.getRuntime().availableProcessors()</code></td></tr></tbody></table><h2 id="iddefinition" tabindex="-1">IdDefinition <a class="header-anchor" href="#iddefinition" aria-label="Permalink to &quot;IdDefinition&quot;">​</a></h2><blockquote><p><code>me.ahoo.cosid.spring.boot.starter.segment.SegmentIdProperties.IdDefinition</code></p></blockquote><table tabindex="0"><thead><tr><th>名称</th><th>数据类型</th><th>说明</th><th>默认值</th></tr></thead><tbody><tr><td>mode</td><td><code>Mode</code></td><td>号段生成器模式：<code>DEFAULT</code>/ <code>CHAIN</code></td><td><code>cosid.segment.mode</code></td></tr><tr><td>offset</td><td><code>int</code></td><td>号段初始偏移量</td><td><code>0</code></td></tr><tr><td>step</td><td><code>long</code></td><td>步长</td><td>100</td></tr><tr><td>ttl</td><td><code>long</code></td><td>号段的生存期（秒）</td><td><code>cosid.segment.ttl</code></td></tr><tr><td>chain</td><td><code>Chain</code></td><td>号段链模式配置</td><td><code>cosid.segment.chain</code></td></tr><tr><td>converter</td><td><code>IdConverterDefinition</code></td><td>Id转换器配置</td><td></td></tr></tbody></table><p><strong>YAML 配置样例</strong></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">cosid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${spring.application.name}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  segment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">chain</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    chain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      safe-distance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      prefetch-worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        core-pool-size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        prefetch-period</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1s</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    distributor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">redis</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    share</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      offset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      step</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      converter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        prefix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">cosid_</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">radix</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        radix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          char-size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          pad-start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    provider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      order</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        offset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10000</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        step</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span></span></code></pre></div>`,18)]))}const E=s(a,[["render",n]]);export{c as __pageData,E as default};
